<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/custom.css">
    <script src="js/vendor/modernizr-2.6.2.min.js"></script>

		<!-- BOOTSTRAP -->
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
		<!-- Optional theme -->
		<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap-theme.min.css">

  </head>
  <body>
    <!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

		<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#">Formations.js</a>
				</div>
				<div class="collapse navbar-collapse">
					<ul class="nav navbar-nav">
						<li class="active"><a href="#">Home</a></li>
						<li><a href="#about">About</a></li>
						<li><a href="#contact">Contact</a></li>
					</ul>
				</div><!--/.nav-collapse -->
			</div>
		</div>

		<div class="container">
			<div class="main-content">
				<noscript>You must have JavaScript enabled to use this site.</noscript>
				<div class="col-md-9 stage-container">
					<h2>Front of Stage <small>(frame 1/1)</small></h2>
					<div class="text-right row display-options">
						<span class="col-md-4 text-left">
							<button type="button" class="btn btn-success btn-xs" id="save-stage">
								Save Stage
							</button>
							<button type="button" class="btn btn-info btn-xs" id="make-stage-image"
											data-toggle="modal" data-target="#stage-image-modal">
								Make Image
							</button>
							<button type="button" class="btn btn-danger btn-xs" id="clear-stage">
								Clear Stage
							</button>
						</span>

						<span class="col-md-4 text-center">
							<label for="num-marker-input">Markers: </label>
							<select class="input-xs" id="num-marker-input-horz">
								<option>4</option>
								<option>5</option>
								<option selected="true">6</option>
							</select>
							<select class="input-xs" id="num-marker-input-vert">
								<option>1</option>
								<option>2</option>
								<option selected="true">3</option>
							</select>
							<button type="button" id="num-marker-input-submit"
											class="btn btn-default btn-xs">
								Update
							</button>
						</span>

						<span class="col-md-2">
							<label><input type="checkbox" value="" id="display-names"/>Display Names</label>
						</span>
						<span class="col-md-2">
							<label><input type="checkbox" id="display-grid" checked="checked">
								Display Grid</label>
						</span>
					</div>
					<canvas id="stage-canvas" width="800" height="400" data-resize="full">
						Your browser does not support the &lt;canvas&gt; element!
					</canvas>
				</div>
				<div class="col-md-3">
					<h2>Things</h2>
					<div class="dancers-list">

						<div class="panel panel-default">
							<div data-toggle="collapse" href="#add-dancer-form" class="panel-heading">
								<div class="panel-title text-center">
									Add Dancer
								</div>
							</div>
							<div id="add-dancer-form" class="panel-collapse collapse">
								<div class="panel-body">
									<div class="form-group">
										<label for="addDancerName">Name</label>
										<input type="text" class="form-control" id="addDancerName"
													 placeholder="Enter name">
									</div>
									<div class="form-group">
										<select class="form-control col-xs-1" id="addDancerGender">
											<option>Male</option>
											<option>Female</option>
										</select>
										<select class="form-control" id="addDancerColor">
											<option>Pink</option>
											<option>Blue</option>
											<option>Yellow</option>
											<option>Orange</option>
											<option>Purple</option>
											<option>Green</option>
										</select>
									</div>
									<div class="form-group">
										<button type="button" class="btn btn-primary" id="addDancerButton">
											Add
										</button>
									</div>
								</div>
							</div>
						</div>

						<div class="panel panel-default" id="dancers-list-panel">
							<div class="panel-heading">Dancers</div>
							<div class="list-group" id="dancers"></div>
						</div>

					</div>
				</div>


				<div class="modal fade" id="stage-image-modal">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
								<h4 class="modal-title">Export to Image</h4>
							</div>
							<div class="modal-body">
								<img id="stage-image" alt="Right click to save" width="550">
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
							</div>
						</div><!-- /.modal-content -->
					</div><!-- /.modal-dialog -->
				</div>



				<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
				<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
					<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>

					<script src="js/plugins.js"></script>
					<script src="js/util.js"></script>
					<script src="js/dancer.js"></script>
					<script src="js/marker.js"></script>
					<script src="js/main.js"></script>

					<script type="text/javascript">
						var stage  = new Stage(document.getElementById('stage-canvas'));
						stage.displayNames = $("#display-names").prop("checked");
						stage.displayGrid = $("#display-grid").prop("checked");
						var str = loadPageVar("stage");
						if (str !== "") {

						Stage.deserializeInto(str, stage);

						} else {

						stage.setMarkers(6,3);

						stage.addDancer("Vijay", "M", "yellow");
						stage.addDancer("Vsai", "M", "yellow");
						stage.addDancer("Shals", "F", "yellow");
						stage.addDancer("Mitra", "F", "yellow");
						stage.addDancer("Samir", "M", "pink");
						stage.addDancer("Shawn", "M", "pink");
						stage.addDancer("Shaina", "F", "pink");
						stage.addDancer("Yazzy", "F", "pink");
						stage.addDancer("Sid", "M", "purple");
						stage.addDancer("Ankur", "M", "purple");
						stage.addDancer("Shahana", "F", "purple");
						stage.addDancer("Sowmya", "F", "purple");

						}

						stage.draw();
					</script>

					<script type="text/javascript">

						$("#display-names").change(function() {
						stage.displayNames = !stage.displayNames;
						stage.draw();
						});

						$("#display-grid").change(function() {
						stage.displayGrid = !stage.displayGrid;
						stage.draw();
						});

						$("#save-stage").click(function() {
						var stageString = stage.serialize();
						window.location.search = "?stage="+stageString;
						});

						$("#make-stage-image").click(function() {
						var str = stage.canvas.toDataURL();
						document.getElementById("stage-image").src = str;
						});

						$("#clear-stage").click(function() {
						var id;
						stage.dancers.makeInactive();
						for (id in stage.dancers.array) {
						stage.dancers.array[id].x = null;
						stage.dancers.array[id].y = null;
						}

						window.location.search = "";
						});

						$("#num-marker-input-submit").click(function() {
						var numHorz = parseInt($("#num-marker-input-horz").val(), 10);
						var numVert = parseInt($("#num-marker-input-vert").val(), 10);
						console.log("Setting", numHorz, numVert);
						stage.setMarkers(numHorz, numVert);
						stage.draw();
						});

						$("#addDancerButton").click(function() {
						var name = $("#addDancerName").val();
  					var gender = $("#addDancerGender").val()[0];
  					var color = $("#addDancerColor").val().toLowerCase();
  					stage.addDancer(name, gender, color);
						});
					</script>

					<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
					<script>
						(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
						function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
						e=o.createElement(i);r=o.getElementsByTagName(i)[0];
						e.src='//www.google-analytics.com/analytics.js';
						r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
						ga('create','UA-XXXXX-X');ga('send','pageview');
					</script>
  </body>
</html>
